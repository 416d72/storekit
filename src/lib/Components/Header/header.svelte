<script lang="ts">
	import { setContext } from 'svelte';
	import Sidebar from './Sidebar/sidebar.svelte';
	import PageList from './pageList.svelte';
	import Buttons from './buttons.svelte';
	import {
		sidebar as sidebarHeaderMenu,
		closeAll as closeAllHeaderMenus
	} from '$lib/Stores/UI/headerMenus';
	import { language as languageStore } from '$lib/Stores/language';
	import Footer from '$lib/Components/Footer/footer.svelte';
	setContext('pages', [
		{
			title: 'Home',
			url: '/'
		},
		{
			title: 'Dresses',
			url: '/category/dresses'
		},
		{
			title: 'Skirts',
			url: '/category/skirts'
		},
		{
			title: 'Pants',
			url: '/category/pants'
		},
		{
			title: 'Shoes',
			url: '/category/womens-shoes'
		}
	]);
	setContext('header-user', {
		userName: 'Amr',
		isUserLoggedIn: true
	});
	setContext('cart', [
		{
			image:
				'https://images.unsplash.com/photo-1491553895911-0055eca6402d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8c2hvZXN8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60',
			title: 'Nike Air Max',
			price: 190,
			quantity: 1
		},
		{
			image:
				'https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8c2hvZXN8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60',
			title: 'Nike Ayonix',
			price: 210,
			quantity: 2
		},
		{
			image:
				'https://images.unsplash.com/photo-1575537302964-96cd47c06b1b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1yZWxhdGVkfDE3fHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60',
			title: 'Adidas Yeezy',
			price: 200,
			quantity: 1
		}
	]);
	const escapeClick = (event: KeyboardEvent) => {
		if (event.key === 'Escape' || event.key === 'Esc') {
			closeAllHeaderMenus();
		}
	};
</script>

<svelte:window on:keydown={escapeClick} />

<header class="shadow-lg bg-base-200 drawer min-h-screen">
	<input
		id="main-drawer"
		type="checkbox"
		bind:checked={$sidebarHeaderMenu}
		class="drawer-toggle absolute -top-96 -left-96"
	/>
	<div class="flex flex-col drawer-content">
		<nav
			class="flex items-center sm:justify-evenly lg:justify-around mb-2 shadow-lg bg-base-100 text-base-content"
		>
			<div class="lg:hidden pl-2 w-1/3">
				<label for="main-drawer" class="btn btn-square btn-ghost">
					{#if $languageStore === 'en'}
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 24 24"
							class="h-6 w-6 fill-base-content"
						>
							<path fill="none" d="M0 0h24v24H0z" />
							<path d="M3 4h18v2H3V4zm0 7h12v2H3v-2zm0 7h18v2H3v-2z" />
						</svg>
					{:else}
						<svg
							class="h-6 w-6 fill-base-content"
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 24 24"
							width="24"
							height="24"
						>
							<path fill="none" d="M0 0h24v24H0z" />
							<path d="M3 4h18v2H3V4zm6 7h12v2H9v-2zm-6 7h18v2H3v-2z" />
						</svg>
					{/if}
				</label>
			</div>
			<div class="px-2 w-1/3 flex justify-center lg:justify-start flex-1 lg:flex-none">
				<a href="/">
					<svg class="w-24" xmlns="http://www.w3.org/2000/svg" contentScriptType="text/ecmascript" version="1.0" viewBox="0 0 309.9 98"><defs><clipPath id="a"><path d="M37.5 148.4h300v78h-300zm0 0"/></clipPath></defs><g clip-path="url(#a)" transform="translate(-32.5 -138.4)"><path fill="#ff1616" d="M264.4 225.8H324v-6.6h3.6v7.2h9.9v-8.8h-8.3v-6h8.2v-48.5h-8.2v-6h8.3v-8.7h-9.9v7.2H324v-6.7H51v6.7h-3.6v-7.2h-9.9v8.7h8.3v6h-8.2v48.5h8.2v6h-8.3v8.8h9.9v-7.2H51v6.6h59.6zm71.5-6.6v5.6h-6.7v-5.6zm-290 0v5.6H39v-5.6zm283.3-63.6v-5.7h6.7v5.7zm-290.1 0v-5.7h6.7v5.7zm223.8-4.8H322v4.8h-8v7.5h-5.5v-7.7H300v9.6h6.4v5h-10.3v-14.4H278v1.5h16.5v14.4h12v5.9h7.4v20h-7.5v5.8h-11.9v14.4H278v1.6h18v-14.5h10.4v5H300v9.6h8.4v-7.7h5.5v7.6h8v4.6H53v-4.6h8v-7.6h5.5v7.7H75v-9.6h-6.4v-5H79v14.5h18v-1.6H80.4v-14.4h-12v-5.8H61v-20h7.5v-5.9h11.9v-14.4h16.5v-1.5H79V170H68.5v-5h6.4v-9.6h-8.4v7.7H61v-7.5h-8v-4.7h59.2zm72.6 58.9h-6.3v-6.5H324v-4h6.7v-10H322v8.2h-6.5v-20h6.5v8.2h8.7v-10.2H324v-3.9h5.2V165h6.3zM39.5 165h6.3v6.5H51v4h-6.7v10.1H53v-8.2h6.5v20H53V189h-8.7v10.2H51v3.9h-5.2v6.5h-6.3Zm267 46.6v5.8H302v-5.8Zm-233.5 0v5.8h-4.5v-5.8Zm229-48.5v-5.8h4.5v5.8zm-233.5 0v-5.8H73v5.8zM314 199.3v3.9h-5.5v-4zm-247.5 0v3.9H61v-4zm242-23.9v-3.9h5.5v4zm-247.5 0v-3.9h5.5v4zm263 22V191h4.7v6.4zm-277.7 0V191H51v6.4zm282.4-20v6.3H324v-6.3zm-277.7 0v6.3h-4.7v-6.3zm264.5 21.9h6.5v3.9h-6.5zm-256 3.9H53v-4h6.5zm256-31.7h6.5v4h-6.5zm-256 4H53v-4h6.5zM314 204.6v5h-5.5v-5zm-247.5 0v5H61v-5zm242-34.7v-5h5.5v5zM61 170v-5h5.5v5zm254.5 34.7h6.5v5h-6.5zm-256 5H53v-5h6.5zm256-44.7h6.5v5h-6.5zm-256 5H53v-5h6.5zM322 211.6v6h-6.5v-6Zm-262.5 0v6H53v-6Zm256-48.5v-6h6.5v6zM53 163v-6h6.5v6zm271 46.6v-5h3.6v5zm-276.6 0v-5H51v5zM327.6 165v5H324v-5zM51 165v5h-3.6v-5zm273 46.6h3.6v6H324zm-273 6h-3.6v-6H51zm273-60.5h3.6v6H324zm-273 6h-3.6v-6H51zm0 0"/></g><path fill="#545454" d="M93.8 55.2c0-.6.2-1.2.6-1.9.3-.6.7-1 1.1-1.5 2 1.2 4 1.8 5.8 1.8.7 0 1.3-.1 1.7-.5.4-.3.5-.8.5-1.3 0-1-.6-1.6-1.7-2.1l-3.4-1.4a8.4 8.4 0 0 1-3-2.1c-.6-.8-1-1.9-1-3.1a5.3 5.3 0 0 1 2-4.2c.6-.6 1.4-1 2.2-1.3a9 9 0 0 1 3-.4c2 0 4.1.5 6.3 1.6a4.9 4.9 0 0 1-1.5 3.4c-2-1-3.6-1.4-5.1-1.4-.8 0-1.3.2-1.7.5-.4.3-.6.7-.6 1.1 0 .8.6 1.4 1.7 1.8l3.4 1.5c1.4.6 2.5 1.3 3.2 2.3.7 1 1 2 1 3.2a6 6 0 0 1-.4 2.5 5 5 0 0 1-1.5 1.9c-.6.5-1.4 1-2.3 1.2-1 .3-2 .5-3.3.5a13 13 0 0 1-7-2.1zm24.7-13.9V57a13.2 13.2 0 0 1-4.5 0V41.3h-4.7a9 9 0 0 1-.2-1.8l.2-1.9h14l.2 1.8c0 .7-.2 1.2-.6 1.5a3 3 0 0 1-1.8.5h-2.6zm11.3 10.3c.5 1.5 1.5 2.2 3 2.2.8 0 1.4-.2 1.9-.6a4 4 0 0 0 1.1-1.4c.3-.6.5-1.3.6-2a17.4 17.4 0 0 0 0-4.4c0-.8-.1-1.5-.4-2.2-.2-.8-.5-1.3-1-1.8s-1.2-.7-2.2-.7c-.9 0-1.6.2-2 .6-.5.5-.9 1-1.1 1.7a9 9 0 0 0-.5 2.2 28.3 28.3 0 0 0 0 4.3l.6 2.1zm-2.3 3.9c-2-1.7-3-4.4-3-8.3 0-1.6.1-3 .5-4.3.4-1.3 1-2.3 1.7-3.2a7 7 0 0 1 2.6-1.9c1-.4 2.2-.6 3.5-.6a9 9 0 0 1 3.5.6 7.6 7.6 0 0 1 4.3 5.1c.4 1.3.6 2.7.6 4.3 0 1.7-.2 3.1-.6 4.4a7.6 7.6 0 0 1-1.6 3.1 7 7 0 0 1-2.7 2c-1 .4-2.2.6-3.5.6a8 8 0 0 1-5.3-1.8zm30.7-11.9a5.9 5.9 0 0 1-1 3.3 5.6 5.6 0 0 1-2.4 1.8c1 .4 1.7 1.2 2.1 2.6l.9 2.4c.3 1 .8 1.6 1.4 2a3 3 0 0 1-1.3 1 4 4 0 0 1-1.9.4c-.6 0-1.2-.2-1.5-.6-.4-.4-.8-1-1-2l-1-3c-.3-.5-.6-1-1-1.2-.3-.3-.8-.5-1.5-.5h-1v7a12.5 12.5 0 0 1-4.5 0v-19l.2-.3h6.6c1 0 2 0 2.9.3.8.3 1.5.7 2.1 1.2a5 5 0 0 1 1.4 1.9c.3.7.5 1.6.5 2.7zm-9.3-2.8v5.5h2.1c.6 0 1.1-.1 1.5-.3.3-.2.6-.5.8-.9.2-.3.3-.8.3-1.5 0-1.8-.9-2.8-2.7-2.8h-2.1zm17.2 10.4v2h8.6v1.6c-.3 1.4-1.2 2.1-3 2.1h-7.4c-.8 0-1.5-.2-2-.7-.4-.4-.6-1-.6-1.9V37.8l.2-.2H174l.2 1.8a5 5 0 0 1-.4 2h-7.7v4h6.3l.2 1.8c0 .6 0 1.2-.2 1.8H166Zm26.9 4.6c-.6.9-1.6 1.3-3 1.3-.7 0-1.3-.2-1.7-.6-.4-.4-.7-1-1-2l-1-3.3c-.3-.9-.7-1.5-1-1.9-.5-.4-1-.5-1.7-.5h-1.2v8c-.6.2-1.4.2-2.3.2H178V37.6l2.2-.2c1 0 1.7 0 2.3.2V45h.7c.3 0 .6 0 .7-.2.2 0 .4-.3.6-.7l2.6-5c.3-.7.6-1 1-1.3.3-.2.8-.4 1.5-.4s1.6 0 2.6.2l.2.3-3.4 6.5a6 6 0 0 1-1.6 2c.9.2 1.5.6 2 1.1.4.5.8 1.2 1.1 2.1l1.2 3.5a46 46 0 0 0 .9 2c0 .2.3.4.5.7zm2.4 1.1V37.6l2.3-.2c.9 0 1.6 0 2.3.2V57a12.7 12.7 0 0 1-4.6 0Zm16.2-15.6V57a13.2 13.2 0 0 1-4.5 0V41.3h-4.7a9 9 0 0 1-.2-1.8c0-.7 0-1.4.2-1.9h14l.2 1.8c0 .7-.2 1.2-.6 1.5a3 3 0 0 1-1.8.5h-2.6zm0 0"/><path fill="#ff1616" d="M118 66.5c.3 0 .7 0 1 .2.3 0 .6.3.9.5l-.5.6-.6-.4c-.3-.2-.5-.2-.8-.2-.5 0-.9.2-1.2.5-.4.3-.5.7-.5 1.2s.1 1 .5 1.2c.3.4.7.5 1.2.5s1-.2 1.4-.5l.5.5a2.9 2.9 0 0 1-2 .8 2.5 2.5 0 0 1-2.5-2.5c0-.7.3-1.3.8-1.7.5-.5 1-.7 1.8-.7zm6.6 3.8H122l-.5 1h-.8l2.1-4.8h.9l2.1 4.9h-.8zm-.3-.8-1-2.1-.9 2.1Zm3.8 1.1h2.1v.8h-3v-5h1Zm4.4.8h-.8v-5h.8Zm5.3-4.2h-2.4v1.4h2.2v.8h-2.2v2h-.9v-5h3.3Zm1.8 0c.5-.5 1.1-.7 1.8-.7.8 0 1.4.2 1.9.7.5.4.8 1 .8 1.7s-.3 1.3-.8 1.8-1.1.7-1.9.7c-.7 0-1.3-.2-1.8-.7-.5-.5-.8-1-.8-1.8 0-.7.3-1.3.8-1.7zm1.9 0a1.7 1.7 0 1 0 0 3.5 2 2 0 0 0 1.2-.5c.3-.4.5-.8.5-1.3s-.2-.9-.5-1.2a2 2 0 0 0-1.2-.5zm7.2 4.2-.9-1.5h-1.3v1.5h-.9v-5h2c.6 0 1.1.2 1.5.5.3.3.5.7.5 1.2 0 .4-.1.8-.3 1-.2.3-.4.5-.7.6l1 1.7Zm-2.2-2.2h1.1c.8 0 1.2-.4 1.2-1 0-.7-.4-1-1.2-1h-1.1Zm9.1 2.2h-.8l-2.6-3.5v3.5h-.8v-5h.8l2.6 3.6v-3.5h.8zm2.9 0h-.9v-5h.9Zm5.1-1.1h-2.5l-.4 1h-.9l2.2-4.8h.8l2.2 4.9h-1zm-.3-.8-1-2.1-.9 2.1Zm7.1-3.1a3 3 0 0 1 1.7.5l-.3.8a3 3 0 0 0-1.4-.5 1 1 0 0 0-.6.2c-.2 0-.2.2-.2.3 0 .2 0 .3.2.4 0 .2.3.2.5.3a9.7 9.7 0 0 1 1.2.5c.2 0 .4.2.5.4l.2.7c0 .4-.2.8-.5 1a2 2 0 0 1-1.3.4 3 3 0 0 1-1.1-.2 3 3 0 0 1-1-.6l.4-.7.8.5c.3.2.6.2.9.2l.6-.1c.2-.1.3-.3.3-.5 0-.1 0-.3-.2-.4l-.5-.2a12.6 12.6 0 0 1-1.3-.5c-.2 0-.3-.2-.5-.4l-.2-.7c0-.4.2-.7.5-1 .4-.2.8-.4 1.3-.4zm6.8.8h-1.5v4.2h-.9v-4.2h-1.5v-.7h4zm1.8 0c.5-.5 1-.7 1.8-.7.7 0 1.4.2 1.9.7.5.4.7 1 .7 1.7s-.2 1.3-.7 1.8c-.5.5-1.2.7-1.9.7s-1.3-.2-1.8-.7c-.5-.5-.8-1-.8-1.8 0-.7.3-1.3.8-1.7zm1.8 0a1.7 1.7 0 1 0 0 3.5c.5 0 1-.2 1.2-.5.4-.4.6-.8.6-1.3s-.2-.9-.6-1.2c-.3-.3-.7-.5-1.2-.5zm7.3 4.2-.9-1.5h-1.4v1.5h-.8v-5h2c.6 0 1 .2 1.4.5.4.3.6.7.6 1.2 0 .4-.1.8-.3 1-.2.3-.4.5-.8.6l1.1 1.7Zm-2.3-2.2h1.2c.8 0 1.2-.4 1.2-1 0-.7-.4-1-1.2-1h-1.2Zm8.5-2h-2.7v1.3h2.4v.8h-2.4v1.3h2.7v.8h-3.5v-5h3.5zm-52.7-38.6h-2.7v1.3h2.4v.7h-2.4V32h2.8v.7H138v-4.9h3.5zm3.4-.8a3 3 0 0 1 1.7.5l-.4.7c-.5-.3-1-.4-1.4-.4a1 1 0 0 0-.6.1l-.2.4c0 .1 0 .3.2.4l.5.2a9.7 9.7 0 0 1 1.3.5c.2 0 .3.2.4.4.2.2.2.5.2.7 0 .5-.1.8-.5 1-.3.3-.8.4-1.3.4a3 3 0 0 1-1-.2 3 3 0 0 1-1-.5l.3-.8.9.6.8.2c.3 0 .5 0 .7-.2l.2-.4c0-.2 0-.3-.2-.5l-.5-.2a12.6 12.6 0 0 1-1.2-.4l-.5-.5c-.2-.1-.2-.4-.2-.6 0-.5.1-.8.5-1 .3-.3.7-.4 1.3-.4zm6.8.8h-1.6v4.1h-.8v-4.1h-1.6v-.8h4zm5.1 4.1h-.8v-4.2h-1v-.7h1.8Zm3.4 0c-.5 0-1 0-1.4-.3l.3-.6c.3.2.7.3 1 .3.5 0 .9-.2 1.1-.5.2-.3.4-.8.3-1.3-.2.5-.7.7-1.3.7-.5 0-.9-.2-1.1-.4-.3-.3-.5-.7-.5-1.2s.2-.9.5-1.2c.3-.3.7-.4 1.3-.4.6 0 1 .2 1.4.6.4.4.6 1 .6 1.8 0 .7-.2 1.4-.6 1.8a2 2 0 0 1-1.6.7Zm.2-2.4c.3 0 .5 0 .7-.2.2-.2.3-.4.3-.7 0-.2 0-.4-.3-.6-.1-.2-.4-.3-.7-.3a1 1 0 0 0-.7.2 1 1 0 0 0-.3.7c0 .3 0 .5.2.7.2.2.5.2.8.2zm4.8 2.4c-.5 0-1 0-1.4-.3l.3-.6c.3.2.7.3 1 .3.5 0 .9-.2 1.1-.5.3-.3.4-.8.3-1.3-.2.5-.7.7-1.3.7-.5 0-.9-.2-1.1-.4-.3-.3-.5-.7-.5-1.2s.2-.9.5-1.2c.3-.3.7-.4 1.3-.4.6 0 1 .2 1.4.6.4.4.6 1 .6 1.8 0 .7-.2 1.4-.6 1.8a2 2 0 0 1-1.6.7Zm.2-2.4c.3 0 .5 0 .7-.2.2-.2.3-.4.3-.7 0-.2 0-.4-.2-.6-.2-.2-.5-.3-.8-.3a1 1 0 0 0-.7.2 1 1 0 0 0-.3.7c0 .3 0 .5.3.7.1.2.4.2.7.2zm6.5-1.7h-2.2v1h.6c.6 0 1 .1 1.3.4.3.3.5.7.5 1.1 0 .5-.2.9-.5 1.2-.3.3-.8.4-1.3.4l-1-.1a3 3 0 0 1-.8-.4l.4-.7c.4.4.8.5 1.3.5.3 0 .5 0 .7-.2l.3-.6c0-.3 0-.5-.3-.6a1 1 0 0 0-.7-.3l-1.3.1v-2.6h3Zm0 0"/></svg>
				</a>
			</div>
			<div class="hidden w-1/3 px-2 mx-2 lg:flex lg:flex-1 lg:justify-center">
				<PageList />
			</div>
			<Buttons />
		</nav>
		<slot />
		<Footer />
	</div>
	<Sidebar />
</header>
